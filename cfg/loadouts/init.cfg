// Initializes the loadouts script.
// Exec this on launch.

// Respawn when changing loadouts (for resup bind).
tf_respawn_on_loadoutchanges 1

// Use these to switch between loadouts.
alias loadouts.A "load_itempreset 0; loadouts.load.A; loadouts.set_logfile; loadouts.echo; con_logfile ."
alias loadouts.B "load_itempreset 1; loadouts.load.B; loadouts.set_logfile; loadouts.echo; con_logfile ."
alias loadouts.C "load_itempreset 2; loadouts.load.C; loadouts.set_logfile; loadouts.echo; con_logfile ."
alias loadouts.D "load_itempreset 3; loadouts.load.D; loadouts.set_logfile; loadouts.echo; con_logfile ."

// Command to echo our info message.
alias loadouts "exec loadouts/echo"

// These set active loadout for each class.
alias loadouts.scout.A    "alias loadouts.restore.scout    loadouts.load.A; alias loadouts.echo echo loadouts.scout.A   "
alias loadouts.scout.B    "alias loadouts.restore.scout    loadouts.load.B; alias loadouts.echo echo loadouts.scout.B   "
alias loadouts.scout.C    "alias loadouts.restore.scout    loadouts.load.C; alias loadouts.echo echo loadouts.scout.C   "
alias loadouts.scout.D    "alias loadouts.restore.scout    loadouts.load.D; alias loadouts.echo echo loadouts.scout.D   "
alias loadouts.soldier.A  "alias loadouts.restore.soldier  loadouts.load.A; alias loadouts.echo echo loadouts.soldier.A "
alias loadouts.soldier.B  "alias loadouts.restore.soldier  loadouts.load.B; alias loadouts.echo echo loadouts.soldier.B "
alias loadouts.soldier.C  "alias loadouts.restore.soldier  loadouts.load.C; alias loadouts.echo echo loadouts.soldier.C "
alias loadouts.soldier.D  "alias loadouts.restore.soldier  loadouts.load.D; alias loadouts.echo echo loadouts.soldier.D "
alias loadouts.pyro.A     "alias loadouts.restore.pyro     loadouts.load.A; alias loadouts.echo echo loadouts.pyro.A    "
alias loadouts.pyro.B     "alias loadouts.restore.pyro     loadouts.load.B; alias loadouts.echo echo loadouts.pyro.B    "
alias loadouts.pyro.C     "alias loadouts.restore.pyro     loadouts.load.C; alias loadouts.echo echo loadouts.pyro.C    "
alias loadouts.pyro.D     "alias loadouts.restore.pyro     loadouts.load.D; alias loadouts.echo echo loadouts.pyro.D    "
alias loadouts.demoman.A  "alias loadouts.restore.demoman  loadouts.load.A; alias loadouts.echo echo loadouts.demoman.A "
alias loadouts.demoman.B  "alias loadouts.restore.demoman  loadouts.load.B; alias loadouts.echo echo loadouts.demoman.B "
alias loadouts.demoman.C  "alias loadouts.restore.demoman  loadouts.load.C; alias loadouts.echo echo loadouts.demoman.C "
alias loadouts.demoman.D  "alias loadouts.restore.demoman  loadouts.load.D; alias loadouts.echo echo loadouts.demoman.D "
alias loadouts.heavy.A    "alias loadouts.restore.heavy    loadouts.load.A; alias loadouts.echo echo loadouts.heavy.A   "
alias loadouts.heavy.B    "alias loadouts.restore.heavy    loadouts.load.B; alias loadouts.echo echo loadouts.heavy.B   "
alias loadouts.heavy.C    "alias loadouts.restore.heavy    loadouts.load.C; alias loadouts.echo echo loadouts.heavy.C   "
alias loadouts.heavy.D    "alias loadouts.restore.heavy    loadouts.load.D; alias loadouts.echo echo loadouts.heavy.D   "
alias loadouts.engineer.A "alias loadouts.restore.engineer loadouts.load.A; alias loadouts.echo echo loadouts.engineer.A"
alias loadouts.engineer.B "alias loadouts.restore.engineer loadouts.load.B; alias loadouts.echo echo loadouts.engineer.B"
alias loadouts.engineer.C "alias loadouts.restore.engineer loadouts.load.C; alias loadouts.echo echo loadouts.engineer.C"
alias loadouts.engineer.D "alias loadouts.restore.engineer loadouts.load.D; alias loadouts.echo echo loadouts.engineer.D"
alias loadouts.medic.A    "alias loadouts.restore.medic    loadouts.load.A; alias loadouts.echo echo loadouts.medic.A   "
alias loadouts.medic.B    "alias loadouts.restore.medic    loadouts.load.B; alias loadouts.echo echo loadouts.medic.B   "
alias loadouts.medic.C    "alias loadouts.restore.medic    loadouts.load.C; alias loadouts.echo echo loadouts.medic.C   "
alias loadouts.medic.D    "alias loadouts.restore.medic    loadouts.load.D; alias loadouts.echo echo loadouts.medic.D   "
alias loadouts.sniper.A   "alias loadouts.restore.sniper   loadouts.load.A; alias loadouts.echo echo loadouts.sniper.A  "
alias loadouts.sniper.B   "alias loadouts.restore.sniper   loadouts.load.B; alias loadouts.echo echo loadouts.sniper.B  "
alias loadouts.sniper.C   "alias loadouts.restore.sniper   loadouts.load.C; alias loadouts.echo echo loadouts.sniper.C  "
alias loadouts.sniper.D   "alias loadouts.restore.sniper   loadouts.load.D; alias loadouts.echo echo loadouts.sniper.D  "
alias loadouts.spy.A      "alias loadouts.restore.spy      loadouts.load.A; alias loadouts.echo echo loadouts.spy.A     "
alias loadouts.spy.B      "alias loadouts.restore.spy      loadouts.load.B; alias loadouts.echo echo loadouts.spy.B     "
alias loadouts.spy.C      "alias loadouts.restore.spy      loadouts.load.C; alias loadouts.echo echo loadouts.spy.C     "
alias loadouts.spy.D      "alias loadouts.restore.spy      loadouts.load.D; alias loadouts.echo echo loadouts.spy.D     "

// If not mentioned in the save files assume loadout A.
loadouts.scout.A; loadouts.soldier.A; loadouts.pyro.A; loadouts.demoman.A; loadouts.heavy.A; loadouts.engineer.A; loadouts.medic.A; loadouts.sniper.A; loadouts.spy.A

// These update aliases based on current class.
alias loadouts.scout        "alias loadouts.class.A loadouts.scout.A   ; alias loadouts.class.B loadouts.scout.B   ; alias loadouts.class.C loadouts.scout.C   ; alias loadouts.class.D loadouts.scout.D   ; alias loadouts.set_logfile con_logfile cfg/loadouts.scout.txt   ; loadouts.restore.scout   ; echo [Loadouts] Scout loadout restored.   "
alias loadouts.soldier      "alias loadouts.class.A loadouts.soldier.A ; alias loadouts.class.B loadouts.soldier.B ; alias loadouts.class.C loadouts.soldier.C ; alias loadouts.class.D loadouts.soldier.D ; alias loadouts.set_logfile con_logfile cfg/loadouts.soldier.txt ; loadouts.restore.soldier ; echo [Loadouts] Soldier loadout restored. "
alias loadouts.pyro         "alias loadouts.class.A loadouts.pyro.A    ; alias loadouts.class.B loadouts.pyro.B    ; alias loadouts.class.C loadouts.pyro.C    ; alias loadouts.class.D loadouts.pyro.D    ; alias loadouts.set_logfile con_logfile cfg/loadouts.pyro.txt    ; loadouts.restore.pyro    ; echo [Loadouts] Pyro loadout restored.    "
alias loadouts.demoman      "alias loadouts.class.A loadouts.demoman.A ; alias loadouts.class.B loadouts.demoman.B ; alias loadouts.class.C loadouts.demoman.C ; alias loadouts.class.D loadouts.demoman.D ; alias loadouts.set_logfile con_logfile cfg/loadouts.demoman.txt ; loadouts.restore.demoman ; echo [Loadouts] Demoman loadout restored. "
alias loadouts.heavyweapons "alias loadouts.class.A loadouts.heavy.A   ; alias loadouts.class.B loadouts.heavy.B   ; alias loadouts.class.C loadouts.heavy.C   ; alias loadouts.class.D loadouts.heavy.D   ; alias loadouts.set_logfile con_logfile cfg/loadouts.heavy.txt   ; loadouts.restore.heavy   ; echo [Loadouts] Heavy loadout restored.   "
alias loadouts.engineer     "alias loadouts.class.A loadouts.engineer.A; alias loadouts.class.B loadouts.engineer.B; alias loadouts.class.C loadouts.engineer.C; alias loadouts.class.D loadouts.engineer.D; alias loadouts.set_logfile con_logfile cfg/loadouts.engineer.txt; loadouts.restore.engineer; echo [Loadouts] Engineer loadout restored."
alias loadouts.medic        "alias loadouts.class.A loadouts.medic.A   ; alias loadouts.class.B loadouts.medic.B   ; alias loadouts.class.C loadouts.medic.C   ; alias loadouts.class.D loadouts.medic.D   ; alias loadouts.set_logfile con_logfile cfg/loadouts.medic.txt   ; loadouts.restore.medic   ; echo [Loadouts] Medic loadout restored.   "
alias loadouts.sniper       "alias loadouts.class.A loadouts.sniper.A  ; alias loadouts.class.B loadouts.sniper.B  ; alias loadouts.class.C loadouts.sniper.C  ; alias loadouts.class.D loadouts.sniper.D  ; alias loadouts.set_logfile con_logfile cfg/loadouts.sniper.txt  ; loadouts.restore.sniper  ; echo [Loadouts] Sniper loadout restored.  "
alias loadouts.spy          "alias loadouts.class.A loadouts.spy.A     ; alias loadouts.class.B loadouts.spy.B     ; alias loadouts.class.C loadouts.spy.C     ; alias loadouts.class.D loadouts.spy.D     ; alias loadouts.set_logfile con_logfile cfg/loadouts.spy.txt     ; loadouts.restore.spy     ; echo [Loadouts] Spy loadout restored.     "

echo [Loadouts] Pruning save files...

// Clear controller bindings.
sixense_clear_bindings

// Load saved state.
exec loadouts.scout.txt
// Overwrite saved loadouts with an empty file.
sixense_write_bindings loadouts.scout.txt
// Set console log path to the save file.
con_logfile cfg/loadouts.scout.txt
// Realias loadout aliases to echo the current active loadout.
alias loadouts.load.A echo loadouts.scout.A
alias loadouts.load.B echo loadouts.scout.B
alias loadouts.load.C echo loadouts.scout.C
alias loadouts.load.D echo loadouts.scout.D
// Calls the current active loadout and echoes a save message set by ^.
loadouts.restore.scout
// Done saving, stop logging.
con_logfile ""

// Repeat for all other classes.

exec loadouts.soldier.txt
alias loadouts.load.A echo loadouts.soldier.A
alias loadouts.load.B echo loadouts.soldier.B
alias loadouts.load.C echo loadouts.soldier.C
alias loadouts.load.D echo loadouts.soldier.D
sixense_write_bindings loadouts.soldier.txt
con_logfile cfg/loadouts.soldier.txt
loadouts.restore.soldier
con_logfile ""

exec loadouts.pyro.txt
alias loadouts.load.A echo loadouts.pyro.A
alias loadouts.load.B echo loadouts.pyro.B
alias loadouts.load.C echo loadouts.pyro.C
alias loadouts.load.D echo loadouts.pyro.D
sixense_write_bindings loadouts.pyro.txt
con_logfile cfg/loadouts.pyro.txt
loadouts.restore.pyro
con_logfile ""

exec loadouts.demoman.txt
alias loadouts.load.A echo loadouts.demoman.A
alias loadouts.load.B echo loadouts.demoman.B
alias loadouts.load.C echo loadouts.demoman.C
alias loadouts.load.D echo loadouts.demoman.D
sixense_write_bindings loadouts.demoman.txt
con_logfile cfg/loadouts.demoman.txt
loadouts.restore.demoman
con_logfile ""

exec loadouts.heavy.txt
alias loadouts.load.A echo loadouts.heavy.A
alias loadouts.load.B echo loadouts.heavy.B
alias loadouts.load.C echo loadouts.heavy.C
alias loadouts.load.D echo loadouts.heavy.D
sixense_write_bindings loadouts.heavy.txt
con_logfile cfg/loadouts.heavy.txt
loadouts.restore.heavy
con_logfile ""

exec loadouts.engineer.txt
alias loadouts.load.A echo loadouts.engineer.A
alias loadouts.load.B echo loadouts.engineer.B
alias loadouts.load.C echo loadouts.engineer.C
alias loadouts.load.D echo loadouts.engineer.D
sixense_write_bindings loadouts.engineer.txt
con_logfile cfg/loadouts.engineer.txt
loadouts.restore.engineer
con_logfile ""

exec loadouts.medic.txt
alias loadouts.load.A echo loadouts.medic.A
alias loadouts.load.B echo loadouts.medic.B
alias loadouts.load.C echo loadouts.medic.C
alias loadouts.load.D echo loadouts.medic.D
sixense_write_bindings loadouts.medic.txt
con_logfile cfg/loadouts.medic.txt
loadouts.restore.medic
con_logfile ""

exec loadouts.sniper.txt
alias loadouts.load.A echo loadouts.sniper.A
alias loadouts.load.B echo loadouts.sniper.B
alias loadouts.load.C echo loadouts.sniper.C
alias loadouts.load.D echo loadouts.sniper.D
sixense_write_bindings loadouts.sniper.txt
con_logfile cfg/loadouts.sniper.txt
loadouts.restore.sniper
con_logfile ""

exec loadouts.spy.txt
alias loadouts.load.A echo loadouts.spy.A
alias loadouts.load.B echo loadouts.spy.B
alias loadouts.load.C echo loadouts.spy.C
alias loadouts.load.D echo loadouts.spy.D
sixense_write_bindings loadouts.spy.txt
con_logfile cfg/loadouts.spy.txt
loadouts.restore.spy
con_logfile ""

// Restore controller bindings.
exec sixense_bindings

// These set the current active loadout.
alias loadouts.load.A "alias loadouts.resup load_itempreset 0; loadouts.class.A; loadouts.cfg.A; echo [Loadouts] Active loadout: A"
alias loadouts.load.B "alias loadouts.resup load_itempreset 1; loadouts.class.B; loadouts.cfg.B; echo [Loadouts] Active loadout: B"
alias loadouts.load.C "alias loadouts.resup load_itempreset 2; loadouts.class.C; loadouts.cfg.C; echo [Loadouts] Active loadout: C"
alias loadouts.load.D "alias loadouts.resup load_itempreset 3; loadouts.class.D; loadouts.cfg.D; echo [Loadouts] Active loadout: D"

// Console message.
echo [Loadouts] Loadouts have been loaded.
